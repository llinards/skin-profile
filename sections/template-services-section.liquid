<div class="container mx-auto px-4 py-8 transition-hide">
  <div class="space-y-4 max-w-5xl mx-auto">
    {% for block in section.blocks %}
      <div
        x-data="{ open: {{ block.settings.open_by_default | json }} }"
        class="overflow-hidden border-t-2"
        {{ block.shopify_attributes }}
      >
        <!-- Header -->
        <button
          type="button"
          @click="open = !open"
          class="w-full flex items-center justify-between px-4 py-3 text-left hover:bg-gray-50 transition-colors"
          :aria-expanded="open.toString()"
        >
          <h3 class="text-3xl md:text-4xl">
            {{ block.settings.title }}
          </h3>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            class="w-6 h-6 text-sp-brown transition-transform"
            :class="{ 'rotate-180': open }"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"/>
          </svg>
        </button>

        <!-- Body -->
        <div
          x-cloak
          x-show="open"
          x-transition:enter="transition ease-out duration-200"
          x-transition:enter-start="opacity-0 -translate-y-2"
          x-transition:enter-end="opacity-100 translate-y-0"
          x-transition:leave="transition ease-in duration-150"
          x-transition:leave-start="opacity-100 translate-y-0"
          x-transition:leave-end="opacity-0 -translate-y-2"
          class="px-4 py-3"
        >
          {% if block.settings.content != blank %}
            <div class="prose max-w-none mb-4">
              {{ block.settings.content }}
            </div>
          {% endif %}

          {% if block.settings.show_services %}
            {% render 'services-table', services: block.settings.services_list %}
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Akordeonu sadaļa",
  "settings": [],
  "blocks": [
    {
      "type": "accordion",
      "name": "Akordeons",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Virsraksts",
          "default": "Akordeona virsraksts"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Saturs",
          "default": "<p>Jūsu teksts šeit.</p>"
        },
        {
          "type": "checkbox",
          "id": "open_by_default",
          "label": "Atvērt pēc noklusējuma",
          "default": false
        },
        {
          "type": "header",
          "content": "Pakalpojumu tabula (izvēles)"
        },
        {
          "type": "checkbox",
          "id": "show_services",
          "label": "Rādīt pakalpojumu tabulu",
          "default": false
        },
        {
          "type": "text",
          "id": "left_label",
          "label": "Kreisā kolonna (virsraksts)",
          "default": "Pakalpojums"
        },
        {
          "type": "text",
          "id": "right_label",
          "label": "Labā kolonna (virsraksts)",
          "default": "Cena"
        },
        {
          "type": "textarea",
          "id": "services_list",
          "label": "Pakalpojumi (katrs jaunā rindā: Nosaukums | Cena)",
          "default": "Sejas tīrīšana | €45\nSejas masāža | €35",
          "info": "Ievadiet katru pakalpojumu jaunā rindā. Atdaliet nosaukumu un cenu ar vertikālo svītru |"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Akordeonu sadaļa",
      "blocks": [
        {
          "type": "accordion",
          "settings": {
            "title": "Sejas procedūras",
            "content": "<p>Profesionāli sejas kopšanas pakalpojumi.</p>",
            "show_services": true,
            "services_list": "Dziļa tīrīšana | €45\nHidratācija | €55\nAnti-age masāža | €65"
          }
        },
        {
          "type": "accordion",
          "settings": {
            "title": "Ķermeņa procedūras",
            "content": "<p>Relaksējošas ķermeņa procedūras.</p>",
            "show_services": true,
            "services_list": "Ķermeņa iesaiņošana | €55\nMasāža | €49"
          }
        }
      ]
    }
  ]
}
{% endschema %}
