<div id="europe-projects" class="container mx-auto px-4 max-w-8xl mb-12">
  <div class="transition-hide">
    {% for block in section.blocks %}
      {% if block.type == 'project_dropdown' %}
        <div
          {{ block.shopify_attributes }}
          x-data="{ open: {{ block.settings.open | json }} }"
          class="overflow-hidden border-t-2"
        >
          <button
            type="button"
            @click="open = !open"
            class="group relative w-full flex items-center gap-3 px-2 md:px-0 md:pr-2 py-4 text-left hover:bg-(--color-brand-secondary) active:bg-(--color-brand-secondary) transition-colors cursor-pointer focus-visible:ring-1 focus-visible:ring-inset"
            :aria-expanded="open.toString()"
            :aria-label="open ? '{{ 'general.accordion.close_section' | t }}' : '{{ 'general.accordion.open_section' | t }}'"
          >
            <div class="flex flex-col md:flex-row md:items-end flex-1 min-w-0">
              <h2 class="text-xl md:text-4xl leading-tight">{{ block.settings.project_title }}</h2>
              {% if block.settings.project_reference %}
                <h3 class="text-base md:text-lg leading-tight body-font mt-1 md:mt-0 md:mb-1.5 md:ml-4">
                  {{ block.settings.project_reference }}
                </h3>
              {% endif %}
            </div>

            <span
              class="inline-flex h-9 w-9 aspect-square items-center justify-center rounded-full border border-(--color-brand-secondary) transition-colors select-none group-hover:bg-(--color-brand-primary) group-hover:text-white"
              :class="open ? 'bg-(--color-brand-primary) text-white' : 'bg-(--color-brand-secondary) text-(--color-brand-primary)'"
            >
              <svg
                x-cloak
                x-show="!open"
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.8"
              >
                <path stroke-linecap="round" d="M12 5v14M5 12h14" />
              </svg>
              <svg
                x-cloak
                x-show="open"
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 pointer-events-none"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.8"
              >
                <path stroke-linecap="round" d="M5 12h14" />
              </svg>
            </span>
          </button>

          <div
            x-cloak
            x-show="open"
            x-transition:enter="transition ease-out duration-200"
            x-transition:enter-start="opacity-0 -translate-y-2"
            x-transition:enter-end="opacity-100 translate-y-0"
            x-transition:leave="transition ease-in duration-150"
            x-transition:leave-start="opacity-100 translate-y-0"
            x-transition:leave-end="opacity-0 -translate-y-2"
            class="px-2 my-4 space-y-2 flex flex-col {% if block.settings.inline_layout %}md:flex-row{% endif %}"
          >
            <div class="{% if block.settings.inline_layout %}md:w-5/6{% endif %}">
              {{ block.settings.content }}
            </div>
            {% if block.settings.content_image %}
              <div class="flex items-centers justify-center {% if block.settings.inline_layout %}md:w-1/6{% endif %}">
                <img
                  src="{{ block.settings.content_image | image_url: width: 300}}"
                  alt=""
                  width="150px"
                  height="150px"
                  class="max-w-full h-auto py-6 {% if block.settings.inline_layout %}md:py-0{% endif %}"
                >
              </div>
            {% endif %}
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

{% schema %}
{
  "name": "Dropdown - Projekti",
  "settings": [],
  "blocks": [
    {
      "type": "project_dropdown",
      "name": "Projekta dropdown",
      "settings": [
        { "type": "text", "id": "project_title", "label": "Projekta nosaukums", "default": "Projekta nosaukums" },
        {
          "type": "text",
          "id": "project_reference",
          "label": "Projekta atsauce",
          "default": "Projekta atsauces numurs / cita info"
        },
        {
          "type": "image_picker",
          "id": "content_image",
          "label": "Projekta bilde/logo"
        },
        { "type": "richtext", "id": "content", "label": "Saturs", "default": "<p>Jūsu teksts šeit.</p>" },
        { "type": "checkbox", "id": "open", "label": "Atvērt pēc noklusējuma", "default": false },
        { "type": "checkbox", "id": "inline_layout", "label": "Teksts ar bildi vienā rindā", "default": true }
      ]
    }
  ],
  "presets": [
    {
      "name": "Dropdown - Projekti",
      "blocks": [{ "type": "project_dropdown" }, { "type": "project_dropdown" }]
    }
  ]
}
{% endschema %}
