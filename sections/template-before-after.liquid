<div class="container mx-auto px-4 pb-12 transition-hide">
  <div class="md:flex md:gap-x-24 md:items-center">
    <!-- Left column: Text content grouped -->
    <div class="flex flex-col md:w-1/2 items-center md:items-start justify-center space-y-6 md:space-y-12">
      <h2 class="text-center md:text-left">{{ section.settings.heading }}</h2>
      <div class="space-y-2 text-center md:text-left">
        {{ section.settings.text }}
      </div>
      <div class="hidden md:flex">
        {% for block in section.blocks %}
          {% if block.type == 'button' %}
            <div class="flex justify-center md:justify-start w-full">
              {% case block.settings.style %}
                {% when 'white' %}
                  {% render 'btn-white', text: block.settings.text, url: block.settings.url %}
                {% when 'brown' %}
                  {% render 'btn-brown', text: block.settings.text, url: block.settings.url %}
              {% endcase %}
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>

    <!-- Right column: Image -->
    <div class="w-full md:w-1/2 h-full">
      <div
        class="relative"
        x-data="
          {
              value: 50,
              beforeSrc: {{ section.settings.before_image | image_url }},
              afterSrc: {{ section.settings.after_image | image_url }}
          }
        "
      >
        <img
          :src="{{ section.settings.image | image_url }}"
          alt=""
          class="w-full"
          width="1024"
          height="1024"
          loading="lazy"
        >
        <div
          class="absolute bottom-0 left-0 top-0 z-10 bg-size-[auto_100%]"
          x-bind:style="`width: ${value}%; background-image: url(${afterSrc})`"
        ></div>
        <input
          type="range"
          min="0"
          max="100"
          x-model="value"
          class="absolute inset-0 z-20 cursor-ew-resize opacity-0 outline-0"
        >
        <div
          class="pointer-events-none absolute bottom-0 left-0 top-0 z-30 flex -translate-x-1/2 items-center justify-center"
          x-bind:style="'left: '+value+'%'"
        >
          <div class="absolute left-1/2 h-full w-1 -translate-x-1/2 bg-gray-100"></div>
          <div class="flex h-12 w-12 items-center justify-center rounded-full bg-gray-100">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="h-4 w-4"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
            </svg>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="h-4 w-4"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
            </svg>
          </div>
        </div>
      </div>

      <p class="uppercase text-sm text-gray-400 text-center mt-2 pb-6 md:pb-0">*Attēlam ir ilustratīva nozīme</p>
    </div>

    <div class="md:hidden">
      {% for block in section.blocks %}
        {% if block.type == 'button' %}
          <div class="flex justify-center md:justify-start w-full">
            {% case block.settings.style %}
              {% when 'white' %}
                {% render 'btn-white', text: block.settings.text, url: block.settings.url %}
              {% when 'brown' %}
                {% render 'btn-brown', text: block.settings.text, url: block.settings.url %}
            {% endcase %}
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Pirms un Pēc Sadaļa",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Virsraksts",
      "default": "Virsraksts šeit"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Teksts",
      "default": "<p>Jūsu teksts šeit.</p>"
    },
    {
      "type": "image_picker",
      "id": "before_image",
      "label": "Pirms attēls"
    },
    {
      "type": "image_picker",
      "id": "after_image",
      "label": "Pēc attēls"
    },
    {
      "type": "text",
      "id": "alt_text",
      "label": "Attēla alt teksts",
      "default": "Attēls"
    }
  ],
  "blocks": [
    {
      "type": "button",
      "name": "Poga",
      "limit": 1,
      "settings": [
        { "type": "text", "id": "text", "label": "Uzzināt vairāk", "default": "Button" },
        { "type": "url", "id": "url", "label": "Button link" },
        {
          "type": "select",
          "id": "style",
          "label": "Pogas veids",
          "options": [
            { "value": "white", "label": "Balta" },
            { "value": "brown", "label": "Brūna" }
          ],
          "default": "white"
        }
      ]
    }
  ],
  "max_blocks": 1,
  "presets": [
    {
      "name": "Pirms un Pēc Sadaļa"
    }
  ]
}
{% endschema %}
